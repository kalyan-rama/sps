{% extends "base.html" %}
{% block title %}Admin Dashboard{% endblock %}
{% block content %}
<h2>Admin Dashboard</h2>


<h2>üì¶ Products</h2>
<a href="{{ url_for('add_product') }}" class="btn">‚ûï Add Product</a>
<table border="1">
  <tr>
    <th>ID</th>
    <th>Name</th>
    <th>Price</th>
    <th>Stock</th>
    <th>Actions</th>
  </tr>
  {% for p in products %}
  <tr>
    <td>{{ p.id }}</td>
    <td>{{ p.name }}</td>
    <td>‚Çπ{{ '%.2f'|format(p.price) }}</td>
    <td>{{ p.stock }}</td>
    <td>
      <a href="{{ url_for('edit_product', product_id=p.id) }}">‚úèÔ∏è Edit</a>
      <form action="{{ url_for('delete_product', product_id=p.id) }}" method="post" style="display:inline;">
  <button type="submit" onclick="return confirm('Delete this product?')" class="btn danger">üóëÔ∏è Delete</button>
</form>

      </form>
    </td>
  </tr>
  {% endfor %}
</table>

<h3>Orders</h3>
<table class="cart-table" border="1">
  <thead>
    <tr>
      <th>ID</th>
      <th>Customer</th>
      <th>Email</th>
      <th>Phone</th>
      <th>Items</th>
      <th>Total</th>
      <th>Status</th>
      <th>Update</th>
    </tr>
  </thead>
  <tbody>
    {% for o in orders %}
    <tr>
      <td>{{ o.id }}</td>
      <td>{{ o.customer_name }}</td>
      <td>{{ o.customer_email }}</td>
      <td>{{ o.customer_phone }}</td>
      <td>{{ o.product.name }} √ó {{ o.qty }}</td>
      <td>‚Çπ{{ '%.2f'|format(o.total) }}</td>
      <td>
        {% if o.status == 'Pending' %}
          <span style="color:#856404; background:#fff3cd; padding:2px 6px; border-radius:4px;">Pending</span>
        {% elif o.status == 'Processing' %}
          <span style="color:#0c5460; background:#d1ecf1; padding:2px 6px; border-radius:4px;">Processing</span>
        {% elif o.status == 'Shipped' %}
          <span style="color:#004085; background:#cce5ff; padding:2px 6px; border-radius:4px;">Shipped</span>
        {% elif o.status == 'Delivered' %}
          <span style="color:#155724; background:#d4edda; padding:2px 6px; border-radius:4px;">Delivered</span>
        {% elif o.status == 'Cancelled' %}
          <span style="color:#721c24; background:#f8d7da; padding:2px 6px; border-radius:4px;">Cancelled</span>
        {% else %}
          {{ o.status }}
        {% endif %}
      </td>
      <td>
        <form action="{{ url_for('update_order', order_id=o.id) }}" method="post">
          <select name="status">
            <option value="Pending" {% if o.status=='Pending' %}selected{% endif %}>Pending</option>
            <option value="Processing" {% if o.status=='Processing' %}selected{% endif %}>Processing</option>
            <option value="Shipped" {% if o.status=='Shipped' %}selected{% endif %}>Shipped</option>
            <option value="Delivered" {% if o.status=='Delivered' %}selected{% endif %}>Delivered</option>
            <option value="Cancelled" {% if o.status=='Cancelled' %}selected{% endif %}>Cancelled</option>
          </select>
          <button type="submit">Update</button>
        </form>
         <form action="{{ url_for('update_order', order_id=o.id) }}" method="post" style="display:inline;">
    <button type="submit" onclick="return confirm('Delete this order?')" class="btn danger">üóëÔ∏è Delete</button>
  </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
